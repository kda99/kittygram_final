FROM python:3.9-slim
# Делаем рабочей директорией, то же самое, что команда CD, условно.
WORKDIR /app
# Устанавливаем gunicorn
#RUN pip install gunicorn==20.1.0
# Копируем все, что в директории backend в директорию /app контейнера.
COPY . .
# Устанавливаем биб-ки в окружение.
RUN pip install -r requirements.txt --no-cache-dir
# Запускаем gunicorn на 8000 порту.
# Ключ --bind 0.0.0.0:8000 привяжет приложение Taski к порту 8000,
# доступному извне, — стандартная привязка к 127.0.0.1:8000 не сработает,
# так как обращение к контейнеру с хоста не считается локальным.
CMD ["gunicorn", "--bind", "0:8000", "kittygram_backend.wsgi"]
